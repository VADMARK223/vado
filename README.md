# Build GUI
## –ü—Ä–æ—Å—Ç–∞—è —Å–±–æ—Ä–∫–∞ –∏—Å–ø–æ–ª–Ω—è–µ–º–æ–≥–æ —Ñ–∞–π–ª–∞
```shell
CGO_ENABLED=1 GOOS=linux go build -installsuffix cgo -o vado-gui ./cmd/gui
```
1. `CGO_ENABLED=0`
* –û—Ç–∫–ª—é—á–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ  **CGO** (C buildings).
* –¢–æ –µ—Å—Ç—å –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä **Go** –Ω–µ –±—É–¥–µ—Ç –ø—ã—Ç–∞—Ç—å—Å—è –ª–∏–Ω–∫–æ–≤–∞—Ç—å –∫–æ–¥ –Ω–∞ –°.
* –≠—Ç–æ –¥–µ–ª–∞–µ—Ç –±–∏–Ω–∞—Ä–Ω–∏–∫ **—á–∏—Å—Ç–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–±—Ä–∞–Ω–Ω—ã–º** - –±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –æ—Ç —Å–∏—Å—Ç–µ–º—ã –°-–±–∏–±–ª–∏–æ—Ç–µ–∫.
* –û—Å–æ–±–µ–Ω–Ω–æ –≤–∞–∂–Ω–æ –ø—Ä–∏ —Å–±–æ—Ä–∫–µ –ø–æ–¥ **Linux**, —á—Ç–æ–±—ã –±–∏–Ω–∞—Ä–Ω–∏–∫ —Ä–∞–±–æ—Ç–∞–ª –Ω–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö –≤—Ä–æ–¥–µ `alpine` –∏–ª–∏ `scratch`.

üí° –ò—Ç–æ–≥–æ: –±–∏–Ω–∞—Ä—å —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è portable ‚Äî –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –Ω–∞ –ª—é–±–æ–º Linux, –±–µ–∑ libc.

2. `GOOS=linux`
* –£–∫–∞–∑—ã–≤–∞–µ—Ç —Ü–µ–ª–µ–≤—É—é –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É –¥–ª—è —Å–±–æ—Ä–∫–∏.
* –ü–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–±–∏—Ä–∞—Ç—å –∫—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ.
–ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ —Ç—ã –Ω–∞ macOS –∏–ª–∏ Windows, —Ç–æ –≤—Å—ë —Ä–∞–≤–Ω–æ –ø–æ–ª—É—á–∏—à—å –±–∏–Ω–∞—Ä—å –ø–æ–¥ Linux.
3. `-installsuffix cgo`
* –î–æ–±–∞–≤–ª—è–µ—Ç —Å—É—Ñ—Ñ–∏–∫—Å `cgo` –∫ –ø—É—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ (build cache, pkg dir).
* –≠—Ç–æ –Ω—É–∂–Ω–æ, —á—Ç–æ–±—ã Go –Ω–µ –ø—É—Ç–∞–ª –æ–±—ã—á–Ω—ã–µ –∏ `CGO_DISABLED` —Å–±–æ—Ä–∫–∏.

–ù–∞–ø—Ä–∏–º–µ—Ä, Go –∫—ç—à–∏—Ä—É–µ—Ç —Å–±–æ—Ä–∫–∏ –ø–∞–∫–µ—Ç–æ–≤.
–ï—Å–ª–∏ —Ç—ã —Å–æ–±—Ä–∞–ª —Å CGO_ENABLED=1, –∞ –ø–æ—Ç–æ–º —Å CGO_ENABLED=0,
–±–µ–∑ -installsuffix cgo Go –º–æ–∂–µ—Ç –≤–∑—è—Ç—å —Å—Ç–∞—Ä—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –∏–∑ –∫—ç—à–∞.
–≠—Ç–æ—Ç —Ñ–ª–∞–≥ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω —á–∏—Å—Ç—ã–π –∫—ç—à –¥–ª—è –≤–µ—Ä—Å–∏–∏ –±–µ–∑ cgo.

# Linux
```shell
sudo lsof -i :9092
sudo kill -9 <PID>
```

# gRPC
–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑ .proto —Ñ–∞–π–ª–∞ –∫–ª–∞—Å—Å–æ–≤ go
1. –ó–∞–¥–∞—á–∏
```shell
protoc -I=proto \
  --go_out=./internal/pb/taskpb \
  --go_opt=paths=source_relative \
  --go-grpc_out=./internal/pb/taskpb \
  --go-grpc_opt=paths=source_relative \
  proto/task.proto
```
2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
```shell
   protoc --go_out=./ --go-grpc_out=./ proto/user.proto
```

# Kafka
–ü—Ä–æ—á–∏—Ç–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è
```shell
docker exec -it kafka kafka-console-consumer \
  --bootstrap-server localhost:9092 \
  --topic tasks \
  --from-beginning
```

# Docker compose

–ó–∞–ø—É—Å–∫ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ (`-d`) –∏ `--build` –ø–µ—Ä–µ—Å–æ–±–µ—Ä–µ—Ç –æ–±—Ä–∞–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–µ—Å–ª–∏ –∫–æ–¥ –º–µ–Ω—è–ª—Å—è):
```shell
docker compose up --build -d
```
–û—Å—Ç–∞–Ω–æ–≤–∫–∞ (`-v` —É–¥–∞–ª—è–µ—Ç –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∏ –°–µ—Ç—å –∏ –¢–æ–º–∞, –±–µ–∑ -v —Ç–æ–º–∞ –æ—Å—Ç–∞—é—Ç—Å—è, –¥–∞–Ω–Ω—ã–µ –ë–î —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è):
```shell
docker compose down -v
```

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å (-a –ø–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ):
```shell
docker compose ps -a
```
–õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
```bash
docker compose logs -f app
```
–õ–æ–≥–∏ DB:
```bash
docker compose logs -f db
```

# Docker
–§–∞–π–ª `Docker`
```Dockerfile
# –≠—Ç–∞–ø —Å–±–æ—Ä–∫–∏
FROM golang:1.25 AS builder

WORKDIR /app

# –ö–æ–ø–∏—Ä—É–µ–º go.mod –∏ go.sum, –∫–∞—á–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
COPY go.mod go.sum ./
RUN go mod download

# –ö–æ–ø–∏—Ä—É–µ–º –≤–µ—Å—å –ø—Ä–æ–µ–∫—Ç
COPY . .

# –°–æ–±–∏—Ä–∞–µ–º –±–∏–Ω–∞—Ä—å
RUN go build -o vado-go ./cmd/cli

# –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–∑
FROM debian:bookworm-slim

WORKDIR /app
COPY --from=builder /app/vado-go .

CMD ["./vado-go"]
```
–°–æ–±–∏—Ä–∞–µ–º –æ–±—Ä–∞–∑
```bash
docker build . -t vado
```
–ó–∞–ø—É—Å–∫–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
```bash
docker run -d -p 5555:5555 vado
```
–ó–∞—Ö–æ–¥–∏–º –Ω–∞ `http://localhost:5555/`
# Golang
**go run -race main.go** –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≥–æ–Ω–∫–∏ –¥–∞–Ω–Ω—ã—Ö

**go get *link*** –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

**go mod tidy** –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

**go list -m [-u] all** –ø—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —Ç–µ–∫—É—â–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ (-u –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è)

**go get -u ./... && go mod tidy** –æ–±–Ω–æ–≤–∏—Ç –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞ –¥–æ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Å–æ–≤–º–µ—Å—Ç–∏–º—ã—Ö –º–∏–Ω–æ—Ä–Ω—ã—Ö –∏ –ø–∞—Ç—á-–≤–µ—Ä—Å–∏–π + –ø–æ—á–∏—Å—Ç–∏—Ç go.mod –∏ go.sum –æ—Ç –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –ø–∞–∫–µ—Ç–æ–≤.

**go list -m all | grep fyne** –≤–µ—Ä—Å–∏–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫

# Godoc
**go install golang.org/x/tools/cmd/godoc@latest** —É—Å—Ç–∞–Ω–æ–≤–∫–∞

**godoc -http=:6060** –∑–∞–ø—É—Å–∫ –Ω–∞ –ø–æ—Ä—Ç—É (http://localhost:6060/pkg/vado/)

**wget -r -np -nH --cut-dirs=1 -P docs http://localhost:6060/pkg/vado/** –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã.

# Idea
**Ctrl + Alt + L** –ü–µ—Ä–µ—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥

# Swagger
`swag init -g ./internal/transport/rest/taskHandler.go -o internal/docs` –ì–µ–Ω–µ—Ä–∞—Ü–∏—è

# Stack
* Zap logger
* Fyne
* Swagger
* Redpanda for Kafka UI